- cols = [:runner, :time, :name, :uploaded] - (defined?(without_cols) ? without_cols : [])
- runs = order_runs(runs).without(:file).page(params[:page])
- if runs.empty?
  %center
    %i Woops! No runs here, #{['boss', 'friend', 'pal', 'buddy', 'speedfriend', 'friend', 'unfortunately'].sample}!
- else
  %table
    %thead
      %tr
        - if cols.include?(:runner)
          %th.align-right
            %a{href: "?#{params.except(:controller, :action).merge(by: :user_id, order: params[:by] == 'user_id' && params[:order] == 'asc' ? :desc : :asc).to_param}"} Runner
        - if cols.include?(:time)
          %th.align-right
            %a{href: "?#{params.except(:controller, :action).merge(by: :time, order: params[:by] == 'time' && params[:order] == 'asc' ? :desc : :asc).to_param}"} Time
        - if cols.include?(:name)
          %th Name
        - if cols.include?(:uploaded)
          %th.align-right
            %a{href: "?#{params.except(:controller, :action).merge(by: :created_at, order: params[:by] == 'created_at' && params[:order] == 'desc' ? :asc : :desc).to_param}"} Uploaded
    %tbody
      - runs.each do |run|
        %tr
          - if cols.include?(:runner)
            %td.align-right
              - if run.user && run.user.name
                %a{href: user_path(run.user)}= run.user.try(:name)
              - else
                = "-"
          - if cols.include?(:time)
            %td.align-right= render partial: 'shared/time', locals: {time: run.time, show_milliseconds: run.short?}
          - if cols.include?(:name)
            %td
              %a{href: run_path(run)}= run.name
          - if cols.include?(:uploaded)
            %td.align-right{title: run.created_at}= "#{run.time_since_upload} ago"
  .center= will_paginate(runs)
